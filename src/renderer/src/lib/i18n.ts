import { create } from "zustand"
import { persist } from "zustand/middleware"

type Language = "en" | "zh"
type Theme = "dark" | "light"

interface AppSettingsState {
  language: Language
  theme: Theme
  setLanguage: (lang: Language) => void
  setTheme: (theme: Theme) => void
  t: (key: string) => string
}

const translations = {
  en: {
    // Settings & Titlebar
    "settings.title": "Settings",
    "settings.language": "Language",
    "settings.language.english": "English",
    "settings.language.chinese": "Chinese",
    "settings.theme": "Theme",
    "settings.theme.dark": "Dark",
    "settings.theme.light": "Light",
    "settings.tabs.general": "General",
    "settings.tabs.provider": "Provider",
    "settings.tabs.ralph": "RALPH",
    "settings.tabs.email": "Email",
    "settings.tabs.speech": "Speech",
    "settings.tabs.plugins": "Plugins",
    "common.cancel": "Cancel",
    "settings.save": "Save",
    "settings.saved": "Saved",
    "settings.ralph.title": "RALPH MODE",
    "settings.ralph.iterations": "Max iterations per round (safety cap)",
    "settings.email.title": "EMAIL",
    "settings.email.enabled": "Enable email integration",
    "settings.email.from": "From",
    "settings.email.to": "To (comma or newline)",
    "settings.email.smtp": "SMTP",
    "settings.email.imap": "IMAP",
    "settings.email.secure": "Secure",
    "settings.email.username": "Username",
    "settings.email.password": "Password",
    "settings.email.task_tag": "Task Tag",
    "settings.email.task_tag_hint": "Tag used in email subject to identify tasks",
    "settings.email.poll_interval": "IMAP Poll Interval (seconds)",
    "settings.email.poll_interval_hint": "How often to check for new emails.",
    "settings.general.default_workspace": "Default workspace",
    "settings.general.default_workspace_choose": "Choose folder",
    "settings.general.default_workspace_empty": "No folder selected",
    "settings.butler.root_path": "Butler root path",
    "settings.butler.max_concurrent": "Butler max concurrent tasks",
    "settings.butler.recent_rounds": "Butler recent rounds",
    "settings.butler.monitor_scan_interval": "Butler monitor scan interval (sec)",
    "settings.butler.monitor_pull_interval": "Butler monitor pull interval (sec)",
    "settings.butler.avatar": "Butler avatar",
    "settings.butler.avatar_hint": "Upload an image to customize Butler avatar",
    "settings.butler.avatar_upload": "Upload",
    "settings.butler.avatar_clear": "Reset",
    "butler.service_mode.interval": "Service cadence",
    "butler.service_mode.realtime": "Realtime",
    "butler.service_mode.custom": "Custom",
    "notification.mute_task": "Mute this task",
    "notification.unmute_task": "Unmute this task",
    "notification.digest.title": "Butler service digest",
    "notification.digest.updated_tasks": "Updated tasks",
    "scope.classic": "Classic",
    "scope.butler": "Butler",
    "scope.title": "Capability Scope",
    "settings.speech.title": "SPEECH",
    "settings.speech.stt_title": "STT",
    "settings.speech.tts_title": "TTS",
    "settings.speech.stt_url": "STT URL",
    "settings.speech.tts_url": "TTS URL",
    "settings.speech.headers": "Headers",
    "settings.speech.headers_placeholder": "Authorization=Bearer ...",
    "settings.speech.stt_language": "Language (optional)",
    "settings.speech.stt_language_label": "Language",
    "settings.speech.tts_voice": "Voice (optional)",
    "settings.speech.tts_voice_label": "Voice",
    "settings.vision.title": "VISION",
    "settings.vision.description":
      "Control image preprocessing interception and visual tool-calling behavior.",
    "settings.vision.preprocess_intercept": "Enable Pre-processing Intercept",
    "settings.vision.tool_calling": "Enable Visual Tool Calling",
    "app.title": "OpenAnyWork",
    "titlebar.subagents": "Subagents",
    "titlebar.skills": "Skills",
    "titlebar.tools": "Tools",
    "titlebar.mcp": "MCP",
    "titlebar.plugins": "Plugins",
    "titlebar.container": "Container",
    "titlebar.prompts": "Prompts",
    "titlebar.memory": "Memory",

    // Provider Configuration
    "provider.title": "MODEL PROVIDER",
    "provider.ollama": "Ollama (Local)",
    "provider.openai_compatible": "OpenAI Compatible",
    "provider.multimodal": "Multimodal",
    "provider.url": "API URL",
    "provider.model": "Model Name",
    "provider.api_key": "API Key",
    "provider.save": "Save",
    "provider.saved": "Saved",
    "provider.not_configured": "Not configured",
    "provider.url_placeholder_ollama": "http://localhost:11434",
    "provider.url_placeholder_openai": "https://api.openai.com/v1",
    "provider.url_placeholder_multimodal": "https://api.openai.com/v1",
    "provider.model_placeholder": "e.g. qwen2.5:7b or gpt-4o",
    "provider.model_placeholder_ollama": "e.g. qwen2.5:7b",
    "provider.model_placeholder_openai": "e.g. gpt-4o or deepseek-chat",
    "provider.model_placeholder_multimodal": "e.g. gpt-4o",
    "provider.key_placeholder": "sk-...",
    "provider.active": "Active",
    "provider.select_hint": "Select a provider and configure it. Click on a card to activate it.",

    // Window Controls
    "window.minimize": "Minimize",
    "window.maximize": "Maximize",
    "window.close": "Close",

    // Quick Input
    "quick_input.title": "Quick Input",
    "quick_input.placeholder": "Type to start a new conversation...",
    "quick_input.submitting": "Sending...",
    "quick_input.submit_failed": "Failed to send message.",
    "quick_input.no_default_workspace": "Please set a default workspace in Settings → General.",
    "quick_input.open_settings": "Open Settings",
    "quick_input.hint": "Press Enter to send",

    // Sidebar
    "sidebar.new_thread": "New Thread",
    "sidebar.new_thread.default": "New Thread (Default)",
    "sidebar.new_thread.ralph": "New Ralph Thread",
    "sidebar.new_thread.email": "New Email Thread",
    "sidebar.new_thread.loop": "New Loop Thread",
    "sidebar.new_thread.expert": "New Expert Thread",
    "sidebar.new_thread.default_desc": "Standard chat mode",
    "sidebar.new_thread.ralph_desc": "Iteration loop with filesystem memory",
    "sidebar.new_thread.email_desc": "Email-backed tasks and summaries",
    "sidebar.new_thread.loop_desc": "Scheduled, API, or file-triggered loop",
    "sidebar.new_thread.expert_desc": "Multi-expert serial collaboration",
    "sidebar.no_threads": "No threads yet",
    "sidebar.delete": "Delete",
    "sidebar.deleting": "Deleting...",
    "sidebar.rename": "Rename",
    "sidebar.search": "Search threads...",
    "sidebar.delete_confirm_title": "Delete Conversation",
    "sidebar.delete_confirm_desc":
      "Delete this conversation thread. You can optionally remove its memory summaries as well.",
    "sidebar.delete_with_memory": "Delete this conversation's memory summaries as well",

    // Chat
    "chat.new_thread": "NEW THREAD",
    "chat.start_conversation": "Start a conversation with the agent",
    "chat.select_workspace": "Select a workspace folder",
    "chat.workspace_needed": "The agent needs a workspace to create and modify files",
    "chat.placeholder": "Type a message...",
    "chat.thinking": "Agent is thinking...",
    "chat.attach_image": "Attach image",
    "chat.attach_document": "Attach document",
    "chat.image_message_title": "Image message",
    "chat.document_message_title": "Document message",
    "chat.document_parse_failed": "Failed to parse document.",
    "chat.error_title": "Agent Error",
    "chat.error_dismiss": "Dismiss error",
    "chat.select_workspace_button": "Select workspace",
    "chat.workspace_picker_title": "Workspace Folder",
    "chat.workspace_picker_desc":
      "Select a folder for the agent to work in. The agent will read and write files directly to this location.",
    "chat.workspace_picker_active_desc": "The agent will read and write files in this folder.",
    "chat.select_folder": "Select Folder",
    "chat.change_folder": "Change Folder",
    "chat.docker_ready": "Docker mode is ready. Send a message to start.",
    "chat.docker_not_running":
      "Docker container is not running. Open Container settings to start it.",
    "chat.voice_input": "Voice input",
    "chat.voice_stop": "Stop recording",
    "chat.voice_play": "Play audio",
    "chat.voice_stop_playback": "Stop audio",
    "chat.voice_input_failed": "Voice input failed",
    "chat.voice_play_failed": "Voice playback failed",
    "chat.approval.reject": "Reject",
    "chat.approval.approve": "Approve & Run",
    "chat.approval.always_approve": "Always Approve",

    // Loop
    "loop.panel_title": "LOOP",
    "loop.create": "CREATE LOOP",
    "loop.edit": "EDIT LOOP",
    "loop.save": "Save",
    "loop.start": "Start",
    "loop.stop": "Stop",
    "loop.status.running": "Running",
    "loop.status.paused": "Paused",
    "loop.title": "Title",
    "loop.title_placeholder": "Optional thread title",
    "loop.content": "Content",
    "loop.content_placeholder": "What should the loop ask the agent to do?",
    "loop.content_hint":
      "Placeholders: {{time}}, {{trigger.type}}, {{api.json}}, {{api.pathValue}}, {{file.path}}, {{file.preview}}",
    "loop.trigger": "Trigger",
    "loop.trigger.schedule": "Schedule (cron)",
    "loop.trigger.api": "REST API (poll)",
    "loop.trigger.file": "New File",
    "loop.cron": "Cron Expression",
    "loop.api.url": "API URL",
    "loop.api.method": "HTTP Method",
    "loop.api.headers": "Headers (JSON)",
    "loop.api.body": "Body (JSON)",
    "loop.api.json_path": "JSON Path",
    "loop.api.operator": "Condition",
    "loop.api.expected": "Expected Value",
    "loop.file.watch_path": "Watch Path",
    "loop.file.suffixes": "File Suffixes",
    "loop.file.preview_lines": "Preview Lines",
    "loop.last_run": "Last Run",
    "loop.next_run": "Next Run",
    "loop.queue": "Queue",

    // Expert
    "expert.panel_title": "EXPERT",
    "expert.mode_label": "Serial",
    "expert.panel_details": "View Expert Details",
    "expert.create": "CREATE EXPERT",
    "expert.edit": "EDIT EXPERT",
    "expert.save": "Save",
    "expert.title": "Title",
    "expert.title_placeholder": "Optional thread title",
    "expert.loop_enabled": "Enable loop review",
    "expert.loop_on": "Loop On",
    "expert.loop_off": "Loop Off",
    "expert.max_cycles": "Max Cycles",
    "expert.experts": "Experts",
    "expert.experts_count": "Experts",
    "expert.add_expert": "Add Expert",
    "expert.order_label": "Order",
    "expert.role": "Role",
    "expert.role_placeholder": "e.g. Writer / Reviewer / QA",
    "expert.prompt": "Prompt",
    "expert.prompt_placeholder": "Describe this expert's responsibilities and output constraints",
    "expert.no_config": "No expert configuration found.",
    "expert.prompt_empty": "No prompt provided.",
    "expert.error.save_failed": "Failed to save expert configuration.",
    "expert.tab.config": "Config",
    "expert.tab.history": "History Experts",
    "expert.history.save_bundle": "Save Bundle to History",
    "expert.history.save_single": "Save Expert to History",
    "expert.history.name_prompt": "Enter a name for this history item",
    "expert.history.apply": "Apply",
    "expert.history.delete": "Delete",
    "expert.history.empty": "No saved history experts yet.",
    "expert.history.type.bundle": "Bundle",
    "expert.history.type.single": "Single",
    "expert.history.save_success": "Saved to history.",
    "expert.history.delete_confirm": "Delete this history expert?",
    "expert.history.load_failed": "Failed to load expert history.",
    "expert.history.skipped_hint": "Ignored invalid history records",

    // Common
    "common.loading": "Loading...",

    // Panels
    "panel.tasks": "TASKS",
    "panel.files": "FILES",
    "panel.agents": "AGENTS",
    "panel.pending": "PENDING",
    "panel.in_progress": "IN PROGRESS",
    "panel.completed": "COMPLETED",
    "panel.cancelled": "CANCELLED",
    "panel.no_tasks": "No tasks yet",
    "panel.tasks_desc": "Tasks appear when the agent creates them",
    "panel.no_files": "No workspace files",
    "panel.link_folder": "Link",
    "panel.sync_files": "Sync",
    "panel.change_folder": "Change",
    "panel.link_desc": 'Click "Link" to set a sync folder',
    "panel.docker_mounts": "Docker mounts",
    "panel.docker_mounts_desc": "Files are shown from Docker mount paths",
    "panel.mounts": "MOUNTS",
    "panel.mounts_empty": "No mounts",
    "panel.mounts_desc": "Files are shown from container mount paths",

    // Subagents
    "subagents.title": "SUBAGENTS",
    "subagents.add": "New Subagent",
    "subagents.empty": "No custom subagents yet",
    "subagents.name": "Name",
    "subagents.description": "Description",
    "subagents.system_prompt": "System Prompt",
    "subagents.provider": "Provider",
    "subagents.provider_inherit": "Inherit current provider",
    "subagents.model": "Model",
    "subagents.model_placeholder": "Optional model override",
    "subagents.interrupt_on": "Require approval for tools",
    "subagents.model_hint": "Model uses current provider unless overridden",
    "subagents.tools": "Tools",
    "subagents.middleware": "Middleware",
    "subagents.mcp": "MCP",
    "subagents.skills": "Skills",
    "subagents.tools_empty": "No tools available",
    "subagents.middleware_empty": "No middleware available",
    "subagents.mcp_empty": "No MCP servers available",
    "subagents.skills_empty": "No skills available",
    "subagents.mcp_not_running": "Not running",
    "subagents.skills_disabled_global_hint":
      "Globally disabled, but still selectable for this subagent.",
    "subagents.save": "Save",
    "subagents.cancel": "Cancel",
    "subagents.edit": "Edit",
    "subagents.delete": "Delete",
    "subagents.disabled_hint": "Disabled subagents are not injected into agents.",

    // Container
    "container.title": "CONTAINER",
    "container.status": "Docker status",
    "container.available": "Available",
    "container.unavailable": "Unavailable",
    "container.mode": "Docker mode",
    "container.mode_on": "On",
    "container.mode_off": "Off",
    "container.enter": "Enter Docker Mode",
    "container.exit": "Exit Docker Mode",
    "container.restart": "Restart Container",
    "container.running": "Running:",
    "container.image": "Image",
    "container.cpu": "CPU (cores)",
    "container.memory": "Memory (MB)",
    "container.mounts": "Mounts",
    "container.add_mount": "Add mount",
    "container.host_path": "Host path",
    "container.select_path": "Select folder",
    "container.container_path": "Container path",
    "container.read_only": "Read-only",
    "container.ports": "Ports",
    "container.add_port": "Add port",
    "container.port_host": "Host",
    "container.port_container": "Container",
    "container.protocol": "Protocol",
    "container.save": "Save",
    "container.edit_disabled": "Stop the container to edit configuration",

    // Skills
    "skills.title": "SKILLS",
    "skills.add": "Add Skill",
    "skills.scan": "Scan",
    "skills.create": "Create Skill",
    "skills.install": "Install from Path",
    "skills.empty": "No skills found",
    "skills.name": "Name",
    "skills.name_hint": "lowercase-hyphen format",
    "skills.description": "Description",
    "skills.content": "Content",
    "skills.content_placeholder":
      "Include YAML frontmatter (name/description). Leave empty to auto-generate.",
    "skills.path": "Path",
    "skills.sources_hint": "Sources: .openwork/skills + .agents/skills + configured paths",
    "skills.source": "Source",
    "skills.source_managed": "Managed (.openwork/skills)",
    "skills.source_agent_user": "Agent User (~/.agents/skills)",
    "skills.source_agent_workspace": "Agent Workspace (agent/skills, legacy)",
    "skills.source_configured_path": "Configured Path (external registry)",
    "skills.source_unknown": "Unknown",
    "skills.readonly_hint": "External source: read-only (enable/disable is still supported).",
    "skills.install_path": "Skill Path",
    "skills.install_hint": "Folder containing SKILL.md or the SKILL.md file path",
    "skills.save": "Save",
    "skills.cancel": "Cancel",
    "skills.edit": "Edit",
    "skills.delete": "Delete",
    "skills.disabled_hint": "Disabled skills are not injected into agents.",

    // Prompts
    "prompts.title": "PROMPT TEMPLATES",
    "prompts.search_placeholder": "Search prompts...",
    "prompts.create": "Create",
    "prompts.empty": "No prompt templates yet",
    "prompts.view": "View",
    "prompts.edit": "Edit",
    "prompts.copy": "Copy",
    "prompts.delete": "Delete",
    "prompts.delete_confirm": "Delete this prompt template?",
    "prompts.delete_failed": "Failed to delete prompt template",
    "prompts.copied": "Prompt copied",
    "prompts.copy_failed": "Failed to copy prompt",
    "prompts.load_failed": "Failed to load prompt templates",
    "prompts.save_failed": "Failed to save prompt template",
    "prompts.save": "Save",
    "prompts.saving": "Saving...",
    "prompts.back": "Back",
    "prompts.cancel": "Cancel",
    "prompts.name": "Name",
    "prompts.name_placeholder": "Prompt name",
    "prompts.content": "Detailed Content",
    "prompts.content_placeholder": "Enter prompt details...",

    // Memory
    "memory.title": "MEMORY",
    "memory.refresh": "Refresh",
    "memory.clear_all": "Clear Memory",
    "memory.clearing": "Clearing...",
    "memory.clear_confirm":
      "This will delete all conversation memories and daily profiles. Continue?",
    "memory.cleared": "Memory cleared",
    "memory.clear_failed": "Failed to clear memory",
    "memory.load_failed": "Failed to load memory",
    "memory.section.conversation": "Conversation Memory",
    "memory.section.global": "Butler Global Memory (Daily Profile)",
    "memory.empty_conversation": "No conversation memory yet",
    "memory.empty_global": "No daily profile yet",
    "memory.items": "items",
    "memory.thread_fallback": "Thread",

    // Tools
    "tools.title": "TOOLS",
    "tools.empty": "No tools available",
    "tools.env_var": "Env",
    "tools.status_configured": "CONFIGURED",
    "tools.status_missing": "MISSING",
    "tools.key": "Key",
    "tools.key_placeholder": "Enter API key",
    "tools.clear": "Clear",
    "tools.save": "Save",
    "tools.enabled": "ENABLED",
    "tools.disabled": "DISABLED",
    "tools.disabled_hint": "Disabled tools are not injected into agents.",
    "tools.load_failed": "Failed to load tools",
    "tools.save_failed": "Failed to save tool key",
    "tools.analyze_image_unavailable": "Requires Multimodal URL, API key, and model in Settings.",
    "tools.tab_native": "Native Tools",
    "tools.tab_plugins": "Plugin Tools",
    "tools.plugin_group_unknown": "Unknown Plugin",
    "tools.plugin_group_expand": "Expand",
    "tools.plugin_group_collapse": "Collapse",

    // MCP
    "mcp.title": "MCP",
    "mcp.hint": "Manage MCP servers and tools",
    "mcp.add": "Add MCP",
    "mcp.empty": "No MCP servers yet",
    "mcp.name": "Name",
    "mcp.name_placeholder": "e.g. Local Filesystem",
    "mcp.mode": "Mode",
    "mcp.mode_local": "Local",
    "mcp.mode_remote": "Remote",
    "mcp.command": "Command",
    "mcp.command_placeholder": "mcp-server-filesystem",
    "mcp.args": "Args (one per line)",
    "mcp.args_placeholder": "--root\nC:\\\\workspace",
    "mcp.env": "Env (KEY=VALUE)",
    "mcp.env_placeholder": "ENV_VAR=value",
    "mcp.cwd": "Working Directory",
    "mcp.cwd_placeholder": "C:\\\\path\\\\to\\\\server",
    "mcp.url": "SSE URL",
    "mcp.url_placeholder": "http://localhost:8000/sse",
    "mcp.headers": "Headers (KEY=VALUE)",
    "mcp.headers_placeholder": "Authorization=Bearer ...",
    "mcp.auto_start": "Start with app",
    "mcp.tools_count": "Tools",
    "mcp.start": "Start",
    "mcp.stop": "Stop",
    "mcp.edit": "Edit",
    "mcp.delete": "Delete",
    "mcp.save": "Save",
    "mcp.cancel": "Cancel",
    "mcp.delete_confirm": "Delete this MCP server?",
    "mcp.save_failed": "Failed to save MCP server",
    "mcp.start_failed": "Failed to start MCP server",
    "mcp.stop_failed": "Failed to stop MCP server",
    "mcp.disabled_hint": "Disabled MCP servers are not injected.",

    // Plugins
    "plugin.title": "PLUGINS",
    "plugin.knowledgebase.name": "Knowledge Base",
    "plugin.knowledgebase.unavailable": "Knowledge Base plugin is unavailable.",
    "plugin.knowledgebase.description":
      "Local RAG daemon plugin with runtime management and indexed data visibility.",
    "plugin.knowledgebase.setup_hint":
      "Configure daemon executable and env, then start to inspect collections/documents/chunks.",
    "plugin.knowledgebase.enabled": "Enabled",
    "plugin.knowledgebase.status": "Status",
    "plugin.knowledgebase.status.unknown": "Unknown",
    "plugin.knowledgebase.status.ready": "Ready",
    "plugin.knowledgebase.status.running": "Running",
    "plugin.knowledgebase.status.stopped": "Stopped",
    "plugin.knowledgebase.checked_at": "Checked",
    "plugin.knowledgebase.base_url": "Base URL",
    "plugin.knowledgebase.token": "Token",
    "plugin.knowledgebase.start": "Start",
    "plugin.knowledgebase.stop": "Stop",
    "plugin.knowledgebase.refresh": "Refresh",
    "plugin.knowledgebase.open_data_dir": "Open Data Dir",
    "plugin.knowledgebase.section.setup": "Setup",
    "plugin.knowledgebase.section.environment": "Environment",
    "plugin.knowledgebase.section.data_contents": "Data Contents",
    "plugin.knowledgebase.section.logs_milestones": "Logs & Milestones",
    "plugin.knowledgebase.daemon_executable": "Daemon executable",
    "plugin.knowledgebase.select_executable": "Select Executable",
    "plugin.knowledgebase.detected": "Detected",
    "plugin.knowledgebase.missing": "Missing",
    "plugin.knowledgebase.data_directory": "Data directory",
    "plugin.knowledgebase.select_data_dir": "Select Data Dir",
    "plugin.knowledgebase.exists": "Exists",
    "plugin.knowledgebase.will_create_on_start": "Will be created on start",
    "plugin.knowledgebase.stop_before_editing": "Stop daemon before editing configuration values.",
    "plugin.knowledgebase.llm_provider": "LLM Provider",
    "plugin.knowledgebase.embedding_provider": "Embedding Provider",
    "plugin.knowledgebase.provider.ollama": "ollama",
    "plugin.knowledgebase.provider.open_compat": "open_compat",
    "plugin.knowledgebase.ollama.base_url": "Ollama Base URL",
    "plugin.knowledgebase.ollama.llm_model": "Ollama LLM Model",
    "plugin.knowledgebase.ollama.embed_model": "Ollama Embed Model",
    "plugin.knowledgebase.open_compat.base_url": "OpenCompat Base URL",
    "plugin.knowledgebase.open_compat.api_key": "OpenCompat API Key",
    "plugin.knowledgebase.open_compat.llm_model": "OpenCompat LLM Model",
    "plugin.knowledgebase.open_compat.embed_model": "OpenCompat Embed Model",
    "plugin.knowledgebase.retrieve_top_k": "Retrieve Top K",
    "plugin.knowledgebase.chunk_size": "Chunk Size",
    "plugin.knowledgebase.chunk_overlap": "Chunk Overlap",
    "plugin.knowledgebase.save_environment": "Save Environment",
    "plugin.knowledgebase.start_before_browsing":
      "Start daemon successfully before expanding collections/documents/chunks.",
    "plugin.knowledgebase.storage": "Storage",
    "plugin.knowledgebase.storage.sqlite": "sqlite",
    "plugin.knowledgebase.storage.chroma": "chroma",
    "plugin.knowledgebase.storage.blobs": "blobs",
    "plugin.knowledgebase.yes": "yes",
    "plugin.knowledgebase.no": "no",
    "plugin.knowledgebase.refresh_storage": "Refresh Storage",
    "plugin.knowledgebase.tab.collections": "Collections",
    "plugin.knowledgebase.tab.documents": "Documents",
    "plugin.knowledgebase.tab.chunks": "Chunks",
    "plugin.knowledgebase.tab.upload": "Upload",
    "plugin.knowledgebase.collections": "Collections",
    "plugin.knowledgebase.reload": "Reload",
    "plugin.knowledgebase.empty_collections": "No collections.",
    "plugin.knowledgebase.active_for_query": "Active For Query",
    "plugin.knowledgebase.name_label": "Name",
    "plugin.knowledgebase.id_label": "ID",
    "plugin.knowledgebase.created_label": "Created",
    "plugin.knowledgebase.documents": "Documents",
    "plugin.knowledgebase.select_collection_first": "Select a collection first.",
    "plugin.knowledgebase.empty_documents": "No documents.",
    "plugin.knowledgebase.filename_label": "Filename",
    "plugin.knowledgebase.mime_label": "MIME",
    "plugin.knowledgebase.delete_document": "Delete Document",
    "plugin.knowledgebase.delete_document_confirm":
      "Delete this document? Chunks and vectors under this document will be removed together.",
    "plugin.knowledgebase.delete_document_running": "Deleting...",
    "plugin.knowledgebase.delete_document_failed": "Failed to delete document.",
    "plugin.knowledgebase.chunks": "Chunks",
    "plugin.knowledgebase.select_document_first": "Select a document first.",
    "plugin.knowledgebase.empty_chunks": "No chunks.",
    "plugin.knowledgebase.text_label": "Text",
    "plugin.knowledgebase.chunk_delete_not_supported":
      "Chunk deletion is not supported. Chunks are removed only when their document is deleted.",
    "plugin.knowledgebase.delete_collection": "Delete Collection",
    "plugin.knowledgebase.delete_collection_confirm":
      "Delete this collection? The app will delete all documents in the collection first, then delete the collection.",
    "plugin.knowledgebase.delete_collection_running": "Deleting...",
    "plugin.knowledgebase.delete_collection_failed": "Failed to delete collection.",
    "plugin.knowledgebase.upload_title": "Upload Files",
    "plugin.knowledgebase.upload_collection": "Target Collection",
    "plugin.knowledgebase.upload_collection_placeholder": "Select a collection",
    "plugin.knowledgebase.upload_pick_files": "Pick Files",
    "plugin.knowledgebase.upload_clear_files": "Clear Files",
    "plugin.knowledgebase.upload_submitting": "Uploading...",
    "plugin.knowledgebase.upload_submit": "Upload",
    "plugin.knowledgebase.upload_file": "File",
    "plugin.knowledgebase.upload_path": "Path",
    "plugin.knowledgebase.upload_no_files": "No files selected.",
    "plugin.knowledgebase.upload_results": "Upload Results",
    "plugin.knowledgebase.upload_clear_results": "Clear Results",
    "plugin.knowledgebase.upload_status": "Status",
    "plugin.knowledgebase.upload_job": "Job ID",
    "plugin.knowledgebase.upload_error": "Error",
    "plugin.knowledgebase.upload_no_results": "No upload results yet.",
    "plugin.knowledgebase.upload_empty_collections_hint":
      "No collections available. Create the default collection before uploading files.",
    "plugin.knowledgebase.create_default_collection": "Create Default Collection",
    "plugin.knowledgebase.create_default_collection_success":
      "Default collection created and activated for query.",
    "plugin.knowledgebase.create_default_collection_failed":
      "Failed to create default collection. Please retry.",
    "plugin.knowledgebase.default_collection_name": "默认集合",
    "plugin.knowledgebase.active_collections_hint":
      "kb_retrieve only searches active collections when collection_ids is omitted. Activate at least one collection.",
    "plugin.knowledgebase.stale_collections_pruned":
      "Detected deleted collections and automatically synchronized active query scope.",
    "plugin.knowledgebase.milestones": "Milestones",
    "plugin.knowledgebase.empty_milestones": "No milestones.",
    "plugin.knowledgebase.logs": "Logs",
    "plugin.knowledgebase.empty_logs": "No logs.",
    "plugin.actionbook.unavailable": "Actionbook plugin is unavailable.",
    "plugin.actionbook.manual_mode_hint":
      "Install steps are manual. This page only checks status and manages bridge runtime.",
    "plugin.actionbook.enabled": "Enabled",
    "plugin.actionbook.check_cli": "CLI",
    "plugin.actionbook.check_skill": "Skill",
    "plugin.actionbook.check_extension": "Extension",
    "plugin.actionbook.bridge_status": "Bridge",
    "plugin.actionbook.bridge_managed_running": "Running (managed by app)",
    "plugin.actionbook.bridge_external_running": "Running (external process)",
    "plugin.actionbook.bridge_stopped": "Stopped",
    "plugin.actionbook.extension_connected": "Extension link",
    "plugin.actionbook.connected": "Connected",
    "plugin.actionbook.not_connected": "Not connected",
    "plugin.actionbook.checked_at": "Checked",
    "plugin.actionbook.refresh_checks": "Refresh Checks",
    "plugin.actionbook.start_bridge": "Start Bridge",
    "plugin.actionbook.stop_bridge": "Stop Bridge",
    "plugin.actionbook.status_check": "Check Status",
    "plugin.actionbook.ping_check": "Ping",
    "plugin.actionbook.session_token": "Session Token",
    "plugin.actionbook.copy_token": "Copy Token",
    "plugin.actionbook.copied": "Copied",
    "plugin.actionbook.token_missing": "Token not available.",
    "plugin.actionbook.token_source": "Token source",
    "plugin.actionbook.last_status": "Last status",
    "plugin.actionbook.last_ping": "Last ping",
    "plugin.actionbook.milestones": "Milestones",
    "plugin.actionbook.empty_milestones": "No milestones yet.",
    "plugin.actionbook.logs": "Logs",
    "plugin.actionbook.empty_logs": "No logs yet.",

    // General
    "common.progress": "PROGRESS",
    "common.done": "DONE",

    // Ralph Progress
    "ralph.progress.title": "Ralph Progress",
    "ralph.progress.iteration": "Iteration",
    "ralph.progress.phase": "Phase",
    "ralph.progress.more": "more",
    "ralph.progress.empty": "No plan or progress yet",
    "ralph.log.title": "Checkpoint Log",
    "ralph.log.empty": "No checkpoint entries yet",
    "ralph.log.active_agent": "Active agent",
    "ralph.log.all_agents": "All agents",
    "ralph.phase.init": "Initializing",
    "ralph.phase.awaiting_confirm": "Awaiting Confirm",
    "ralph.phase.running": "Running",
    "ralph.phase.verifying": "Verifying",
    "ralph.phase.replanning": "Replanning",
    "ralph.phase.awaiting_continue": "Awaiting Continue",
    "ralph.phase.done": "Done",
    "ralph.plan.project": "Project",
    "ralph.plan.stories": "User Stories"
  },
  zh: {
    // Settings & Titlebar
    "settings.title": "设置",
    "settings.language": "语言",
    "settings.language.english": "英语",
    "settings.language.chinese": "中文",
    "settings.theme": "主题",
    "settings.theme.dark": "深色",
    "settings.theme.light": "浅色",
    "settings.tabs.general": "常规",
    "settings.tabs.provider": "Provider",
    "settings.tabs.ralph": "RALPH",
    "settings.tabs.email": "邮件",
    "settings.tabs.speech": "语音",
    "settings.tabs.plugins": "插件",
    "common.cancel": "取消",
    "settings.save": "保存",
    "settings.saved": "已保存",
    "settings.ralph.title": "RALPH 模式",
    "settings.ralph.iterations": "每轮最大迭代（安全上限）",
    "settings.email.title": "邮件",
    "settings.email.enabled": "启用邮件集成",
    "settings.email.from": "发件人",
    "settings.email.to": "收件人（逗号或换行）",
    "settings.email.smtp": "SMTP",
    "settings.email.imap": "IMAP",
    "settings.email.secure": "安全连接",
    "settings.email.username": "用户名",
    "settings.email.password": "密码",
    "settings.email.task_tag": "任务标签",
    "settings.email.task_tag_hint": "用于识别任务邮件的主题标签",
    "settings.email.poll_interval": "IMAP 拉取间隔（秒）",
    "settings.email.poll_interval_hint": "设置多长时间拉取一次邮件。",
    "settings.general.default_workspace": "默认工作目录",
    "settings.general.default_workspace_choose": "选择目录",
    "settings.general.default_workspace_empty": "未选择目录",
    "settings.butler.root_path": "管家任务根目录",
    "settings.butler.max_concurrent": "管家最大并发任务",
    "settings.butler.recent_rounds": "管家最近对话轮数",
    "settings.butler.monitor_scan_interval": "管家监听扫描间隔（秒）",
    "settings.butler.monitor_pull_interval": "管家监听拉取间隔（秒）",
    "settings.butler.avatar": "管家头像",
    "settings.butler.avatar_hint": "上传图片以自定义管家头像",
    "settings.butler.avatar_upload": "上传",
    "settings.butler.avatar_clear": "重置",
    "butler.service_mode.interval": "服务频率",
    "butler.service_mode.realtime": "实时",
    "butler.service_mode.custom": "自定义",
    "notification.mute_task": "不再提示",
    "notification.unmute_task": "恢复提示",
    "notification.digest.title": "管家服务汇总",
    "notification.digest.updated_tasks": "更新任务",
    "scope.classic": "传统任务",
    "scope.butler": "管家",
    "scope.title": "能力作用域",
    "settings.speech.title": "语音",
    "settings.speech.stt_title": "语音转文字",
    "settings.speech.tts_title": "文字转语音",
    "settings.speech.stt_url": "STT 地址",
    "settings.speech.tts_url": "TTS 地址",
    "settings.speech.headers": "请求头",
    "settings.speech.headers_placeholder": "Authorization=Bearer ...",
    "settings.speech.stt_language": "语言（可选）",
    "settings.speech.stt_language_label": "语言",
    "settings.speech.tts_voice": "音色（可选）",
    "settings.speech.tts_voice_label": "音色",
    "settings.vision.title": "视觉",
    "settings.vision.description": "控制图片预处理拦截与视觉工具调用行为。",
    "settings.vision.preprocess_intercept": "启用预处理拦截模式",
    "settings.vision.tool_calling": "启用视觉工具调用模式",
    "app.title": "OpenAnyWork",
    "titlebar.subagents": "智能体",
    "titlebar.skills": "技能",
    "titlebar.tools": "工具",
    "titlebar.mcp": "MCP",
    "titlebar.plugins": "插件",
    "titlebar.container": "容器",
    "titlebar.prompts": "提示词",
    "titlebar.memory": "记忆",

    // Provider Configuration
    "provider.title": "模型提供者",
    "provider.ollama": "Ollama（本地）",
    "provider.openai_compatible": "OpenAI 兼容",
    "provider.multimodal": "多模态",
    "provider.url": "API 地址",
    "provider.model": "模型名称",
    "provider.api_key": "API 密钥",
    "provider.save": "保存",
    "provider.saved": "已保存",
    "provider.not_configured": "未配置",
    "provider.url_placeholder_ollama": "http://localhost:11434",
    "provider.url_placeholder_openai": "https://api.openai.com/v1",
    "provider.url_placeholder_multimodal": "https://api.openai.com/v1",
    "provider.model_placeholder": "如 qwen2.5:7b 或 gpt-4o",
    "provider.model_placeholder_ollama": "如 qwen2.5:7b",
    "provider.model_placeholder_openai": "如 gpt-4o 或 deepseek-chat",
    "provider.model_placeholder_multimodal": "如 gpt-4o",
    "provider.key_placeholder": "sk-...",
    "provider.active": "已激活",
    "provider.select_hint": "选择一个提供者并配置。点击卡片激活该提供者。",

    // Window Controls
    "window.minimize": "最小化",
    "window.maximize": "最大化",
    "window.close": "关闭",

    // Quick Input
    "quick_input.title": "快速输入",
    "quick_input.placeholder": "输入内容以新建对话...",
    "quick_input.submitting": "正在发送...",
    "quick_input.submit_failed": "消息发送失败。",
    "quick_input.no_default_workspace": "请在设置 → 通用中设置默认工作目录。",
    "quick_input.open_settings": "打开设置",
    "quick_input.hint": "回车发送",

    // Sidebar
    "sidebar.new_thread": "新建对话",
    "sidebar.new_thread.default": "新建对话（默认）",
    "sidebar.new_thread.ralph": "新建 Ralph 对话",
    "sidebar.new_thread.email": "新建邮件对话",
    "sidebar.new_thread.loop": "新建 Loop 对话",
    "sidebar.new_thread.expert": "新建专家对话",
    "sidebar.new_thread.default_desc": "标准对话模式",
    "sidebar.new_thread.ralph_desc": "文件记忆 + 迭代循环",
    "sidebar.new_thread.email_desc": "邮件任务与结果回传",
    "sidebar.new_thread.loop_desc": "定时 / API / 文件触发循环",
    "sidebar.new_thread.expert_desc": "多专家串行协作与循环审稿",
    "sidebar.no_threads": "暂无对话",
    "sidebar.delete": "删除",
    "sidebar.deleting": "删除中...",
    "sidebar.rename": "重命名",
    "sidebar.search": "搜索对话...",
    "sidebar.delete_confirm_title": "删除对话",
    "sidebar.delete_confirm_desc": "将删除该对话线程。你可以选择是否同时删除该线程的记忆摘要。",
    "sidebar.delete_with_memory": "同时删除该对话记忆摘要",

    // Chat
    "chat.new_thread": "新对话",
    "chat.start_conversation": "开始与智能体对话",
    "chat.select_workspace": "选择工作目录",
    "chat.workspace_needed": "智能体需要工作目录来读写文件",
    "chat.placeholder": "输入消息...",
    "chat.thinking": "智能体思考中...",
    "chat.attach_image": "添加图片",
    "chat.attach_document": "添加文档",
    "chat.image_message_title": "图片消息",
    "chat.document_message_title": "文档消息",
    "chat.document_parse_failed": "文档解析失败。",
    "chat.error_title": "智能体错误",
    "chat.error_dismiss": "忽略错误",
    "chat.select_workspace_button": "选择目录",
    "chat.workspace_picker_title": "工作目录",
    "chat.workspace_picker_desc":
      "选择一个文件夹作为智能体的工作目录。智能体将直接在此位置读写文件。",
    "chat.workspace_picker_active_desc": "智能体将在此文件夹中读写文件。",
    "chat.select_folder": "选择文件夹",
    "chat.change_folder": "更改文件夹",
    "chat.docker_ready": "Docker模式已就绪，可直接开始对话。",
    "chat.docker_not_running": "Docker 容器未运行，请在容器设置中启动。",
    "chat.voice_input": "语音输入",
    "chat.voice_stop": "停止录音",
    "chat.voice_play": "播放语音",
    "chat.voice_stop_playback": "停止播放",
    "chat.voice_input_failed": "语音输入失败",
    "chat.voice_play_failed": "语音播放失败",
    "chat.approval.reject": "拒绝",
    "chat.approval.approve": "批准并执行",
    "chat.approval.always_approve": "以后都自动批准",

    // Loop
    "loop.panel_title": "LOOP",
    "loop.create": "创建 Loop",
    "loop.edit": "编辑 Loop",
    "loop.save": "保存",
    "loop.start": "开始",
    "loop.stop": "停止",
    "loop.status.running": "运行中",
    "loop.status.paused": "已暂停",
    "loop.title": "标题",
    "loop.title_placeholder": "可选对话标题",
    "loop.content": "内容",
    "loop.content_placeholder": "让智能体执行的内容",
    "loop.content_hint":
      "占位符：{{time}}，{{trigger.type}}，{{api.json}}，{{api.pathValue}}，{{file.path}}，{{file.preview}}",
    "loop.trigger": "触发方式",
    "loop.trigger.schedule": "定时（cron）",
    "loop.trigger.api": "REST API 轮询",
    "loop.trigger.file": "新文件",
    "loop.cron": "Cron 表达式",
    "loop.api.url": "API 地址",
    "loop.api.method": "HTTP 方法",
    "loop.api.headers": "请求头（JSON）",
    "loop.api.body": "请求体（JSON）",
    "loop.api.json_path": "JSON 路径",
    "loop.api.operator": "条件判断",
    "loop.api.expected": "期望值",
    "loop.file.watch_path": "监听路径",
    "loop.file.suffixes": "文件后缀",
    "loop.file.preview_lines": "预览行数",
    "loop.last_run": "上次运行",
    "loop.next_run": "下次运行",
    "loop.queue": "队列",

    // Expert
    "expert.panel_title": "EXPERT",
    "expert.mode_label": "串行",
    "expert.panel_details": "查看专家详情",
    "expert.create": "创建专家模式",
    "expert.edit": "编辑专家模式",
    "expert.save": "保存",
    "expert.title": "标题",
    "expert.title_placeholder": "可选对话标题",
    "expert.loop_enabled": "启用循环审稿",
    "expert.loop_on": "循环开启",
    "expert.loop_off": "循环关闭",
    "expert.max_cycles": "最大轮次",
    "expert.experts": "专家列表",
    "expert.experts_count": "专家数",
    "expert.add_expert": "添加专家",
    "expert.order_label": "顺序",
    "expert.role": "角色",
    "expert.role_placeholder": "例如：写稿人 / 审稿人 / 校对人",
    "expert.prompt": "Prompt",
    "expert.prompt_placeholder": "描述该专家职责、边界与输出要求",
    "expert.no_config": "未找到专家配置。",
    "expert.prompt_empty": "未填写 prompt。",
    "expert.error.save_failed": "保存专家配置失败。",
    "expert.tab.config": "配置",
    "expert.tab.history": "历史专家",
    "expert.history.save_bundle": "保存整套到历史专家",
    "expert.history.save_single": "保存单专家到历史",
    "expert.history.name_prompt": "请输入历史专家名称",
    "expert.history.apply": "应用",
    "expert.history.delete": "删除",
    "expert.history.empty": "暂无历史专家。",
    "expert.history.type.bundle": "整套配置",
    "expert.history.type.single": "单专家",
    "expert.history.save_success": "已保存到历史专家。",
    "expert.history.delete_confirm": "确认删除该历史专家？",
    "expert.history.load_failed": "加载历史专家失败。",
    "expert.history.skipped_hint": "已忽略无效的历史记录",

    // Common
    "common.loading": "加载中...",

    // Panels
    "panel.tasks": "任务列表",
    "panel.files": "文件管理",
    "panel.agents": "智能体树",
    "panel.pending": "待处理",
    "panel.in_progress": "进行中",
    "panel.completed": "已完成",
    "panel.cancelled": "已取消",
    "panel.no_tasks": "暂无任务",
    "panel.tasks_desc": "智能体创建的任务将显示在此处",
    "panel.no_files": "暂无文件",
    "panel.link_folder": "关联",
    "panel.sync_files": "同步",
    "panel.change_folder": "切换",
    "panel.link_desc": '点击"关联"设置同步文件夹',
    "panel.docker_mounts": "Docker挂载",
    "panel.docker_mounts_desc": "文件来自Docker挂载路径",
    "panel.mounts": "容器挂载",
    "panel.mounts_empty": "暂无挂载",
    "panel.mounts_desc": "文件来自容器挂载路径",

    // Subagents
    "subagents.title": "智能体管理",
    "subagents.add": "新建智能体",
    "subagents.empty": "暂无自定义智能体",
    "subagents.name": "名称",
    "subagents.description": "描述",
    "subagents.system_prompt": "系统提示词",
    "subagents.provider": "模型提供者",
    "subagents.provider_inherit": "继承当前提供者",
    "subagents.model": "模型",
    "subagents.model_placeholder": "可选的模型覆盖",
    "subagents.interrupt_on": "工具需人工确认",
    "subagents.model_hint": "模型默认使用当前配置",
    "subagents.tools": "工具",
    "subagents.middleware": "中间件",
    "subagents.mcp": "MCP",
    "subagents.skills": "技能",
    "subagents.tools_empty": "暂无可用工具",
    "subagents.middleware_empty": "暂无可用中间件",
    "subagents.mcp_empty": "暂无可用 MCP 服务",
    "subagents.skills_empty": "暂无可用技能",
    "subagents.mcp_not_running": "未运行",
    "subagents.skills_disabled_global_hint": "该技能在全局已禁用，但仍可被当前智能体显式启用。",
    "subagents.save": "保存",
    "subagents.cancel": "取消",
    "subagents.edit": "编辑",
    "subagents.delete": "删除",
    "subagents.disabled_hint": "已禁用的智能体不会注入到智能体上下文。",

    // Container
    "container.title": "容器",
    "container.status": "Docker状态",
    "container.available": "可用",
    "container.unavailable": "不可用",
    "container.mode": "Docker模式",
    "container.mode_on": "已开启",
    "container.mode_off": "未开启",
    "container.enter": "进入 Docker 模式",
    "container.exit": "退出 Docker 模式",
    "container.restart": "重启容器",
    "container.running": "运行中：",
    "container.image": "镜像",
    "container.cpu": "CPU(核)",
    "container.memory": "内存(MB)",
    "container.mounts": "挂载",
    "container.add_mount": "新增挂载",
    "container.host_path": "宿主路径",
    "container.select_path": "选择文件夹",
    "container.container_path": "容器路径",
    "container.read_only": "只读",
    "container.ports": "端口",
    "container.add_port": "新增端口",
    "container.port_host": "宿主",
    "container.port_container": "容器",
    "container.protocol": "协议",
    "container.save": "保存",
    "container.edit_disabled": "停止容器后可修改配置",

    // Skills
    "skills.title": "技能管理",
    "skills.add": "添加技能",
    "skills.scan": "扫描",
    "skills.create": "创建技能",
    "skills.install": "路径安装",
    "skills.empty": "暂无技能",
    "skills.name": "名称",
    "skills.name_hint": "小写-连字符",
    "skills.description": "描述",
    "skills.content": "内容",
    "skills.content_placeholder": "请包含 YAML frontmatter（name/description），留空将自动生成。",
    "skills.path": "路径",
    "skills.sources_hint": "来源：.openwork/skills + .agents/skills + 外部路径",
    "skills.source": "来源",
    "skills.source_managed": "托管目录（.openwork/skills）",
    "skills.source_agent_user": "Agent用户目录（~/.agents/skills）",
    "skills.source_agent_workspace": "Agent工作区目录（agent/skills，旧版）",
    "skills.source_configured_path": "外部路径注册源",
    "skills.source_unknown": "未知",
    "skills.readonly_hint": "外部来源为只读（仍支持启用/禁用）。",
    "skills.install_path": "技能路径",
    "skills.install_hint": "包含 SKILL.md 的文件夹或 SKILL.md 文件路径",
    "skills.save": "保存",
    "skills.cancel": "取消",
    "skills.edit": "编辑",
    "skills.delete": "删除",
    "skills.disabled_hint": "已禁用的技能不会注入到智能体。",

    // Prompts
    "prompts.title": "提示词模板",
    "prompts.search_placeholder": "搜索提示词...",
    "prompts.create": "新建",
    "prompts.empty": "暂无提示词模板",
    "prompts.view": "查看",
    "prompts.edit": "编辑",
    "prompts.copy": "复制",
    "prompts.delete": "删除",
    "prompts.delete_confirm": "确认删除该提示词模板？",
    "prompts.delete_failed": "删除提示词模板失败",
    "prompts.copied": "已复制提示词",
    "prompts.copy_failed": "复制提示词失败",
    "prompts.load_failed": "加载提示词模板失败",
    "prompts.save_failed": "保存提示词模板失败",
    "prompts.save": "保存",
    "prompts.saving": "保存中...",
    "prompts.back": "返回",
    "prompts.cancel": "取消",
    "prompts.name": "名称",
    "prompts.name_placeholder": "请输入名称",
    "prompts.content": "详细内容",
    "prompts.content_placeholder": "请输入详细内容...",

    // Memory
    "memory.title": "记忆管理",
    "memory.refresh": "刷新",
    "memory.clear_all": "清除记忆",
    "memory.clearing": "清除中...",
    "memory.clear_confirm": "将删除所有对话记忆和日画像，是否继续？",
    "memory.cleared": "记忆已清除",
    "memory.clear_failed": "清除记忆失败",
    "memory.load_failed": "加载记忆失败",
    "memory.section.conversation": "对话记忆",
    "memory.section.global": "管家通用记忆（日画像）",
    "memory.empty_conversation": "暂无对话记忆",
    "memory.empty_global": "暂无日画像",
    "memory.items": "条",
    "memory.thread_fallback": "线程",

    // Tools
    "tools.title": "工具管理",
    "tools.empty": "暂无工具",
    "tools.env_var": "环境变量",
    "tools.status_configured": "已配置",
    "tools.status_missing": "未配置",
    "tools.key": "密钥",
    "tools.key_placeholder": "请输入 API Key",
    "tools.clear": "清空",
    "tools.save": "保存",
    "tools.enabled": "已启用",
    "tools.disabled": "已禁用",
    "tools.disabled_hint": "禁用的工具不会注入到智能体。",
    "tools.load_failed": "工具加载失败",
    "tools.save_failed": "工具保存失败",
    "tools.analyze_image_unavailable": "需先在设置中配置多模态 URL、API 密钥与模型。",
    "tools.tab_native": "原生工具",
    "tools.tab_plugins": "插件工具",
    "tools.plugin_group_unknown": "未知插件",
    "tools.plugin_group_expand": "展开",
    "tools.plugin_group_collapse": "收起",

    // MCP
    "mcp.title": "MCP",
    "mcp.hint": "管理 MCP 服务器与工具",
    "mcp.add": "添加 MCP",
    "mcp.empty": "暂无 MCP 服务",
    "mcp.name": "名称",
    "mcp.name_placeholder": "例如 本地文件系统",
    "mcp.mode": "模式",
    "mcp.mode_local": "本地",
    "mcp.mode_remote": "远程",
    "mcp.command": "命令",
    "mcp.command_placeholder": "mcp-server-filesystem",
    "mcp.args": "参数（每行一个）",
    "mcp.args_placeholder": "--root\nC:\\\\workspace",
    "mcp.env": "环境变量（KEY=VALUE）",
    "mcp.env_placeholder": "ENV_VAR=value",
    "mcp.cwd": "工作目录",
    "mcp.cwd_placeholder": "C:\\\\path\\\\to\\\\server",
    "mcp.url": "SSE 地址",
    "mcp.url_placeholder": "http://localhost:8000/sse",
    "mcp.headers": "请求头（KEY=VALUE）",
    "mcp.headers_placeholder": "Authorization=Bearer ...",
    "mcp.auto_start": "随应用启动",
    "mcp.tools_count": "工具数量",
    "mcp.start": "启动",
    "mcp.stop": "停止",
    "mcp.edit": "编辑",
    "mcp.delete": "删除",
    "mcp.save": "保存",
    "mcp.cancel": "取消",
    "mcp.delete_confirm": "确认删除该 MCP 服务？",
    "mcp.save_failed": "保存 MCP 服务失败",
    "mcp.start_failed": "启动 MCP 服务失败",
    "mcp.stop_failed": "停止 MCP 服务失败",
    "mcp.disabled_hint": "已禁用的 MCP 不会注入。",

    // Plugins
    "plugin.title": "插件",
    "plugin.knowledgebase.name": "知识库",
    "plugin.knowledgebase.unavailable": "知识库插件不可用。",
    "plugin.knowledgebase.description": "本地 RAG 守护进程插件，支持运行态管理与索引数据可视化。",
    "plugin.knowledgebase.setup_hint": "先配置守护进程路径和环境参数，再启动后查看集合/文档/分块。",
    "plugin.knowledgebase.enabled": "启用",
    "plugin.knowledgebase.status": "状态",
    "plugin.knowledgebase.status.unknown": "未知",
    "plugin.knowledgebase.status.ready": "就绪",
    "plugin.knowledgebase.status.running": "运行中",
    "plugin.knowledgebase.status.stopped": "已停止",
    "plugin.knowledgebase.checked_at": "检测时间",
    "plugin.knowledgebase.base_url": "服务地址",
    "plugin.knowledgebase.token": "令牌",
    "plugin.knowledgebase.start": "启动",
    "plugin.knowledgebase.stop": "停止",
    "plugin.knowledgebase.refresh": "刷新",
    "plugin.knowledgebase.open_data_dir": "打开数据目录",
    "plugin.knowledgebase.section.setup": "基础设置",
    "plugin.knowledgebase.section.environment": "环境配置",
    "plugin.knowledgebase.section.data_contents": "数据内容",
    "plugin.knowledgebase.section.logs_milestones": "日志与关键节点",
    "plugin.knowledgebase.daemon_executable": "守护进程可执行文件",
    "plugin.knowledgebase.select_executable": "选择可执行文件",
    "plugin.knowledgebase.detected": "已检测",
    "plugin.knowledgebase.missing": "缺失",
    "plugin.knowledgebase.data_directory": "数据目录",
    "plugin.knowledgebase.select_data_dir": "选择数据目录",
    "plugin.knowledgebase.exists": "已存在",
    "plugin.knowledgebase.will_create_on_start": "启动时将自动创建",
    "plugin.knowledgebase.stop_before_editing": "请先停止守护进程，再编辑配置项。",
    "plugin.knowledgebase.llm_provider": "LLM 提供方",
    "plugin.knowledgebase.embedding_provider": "Embedding 提供方",
    "plugin.knowledgebase.provider.ollama": "ollama",
    "plugin.knowledgebase.provider.open_compat": "open_compat",
    "plugin.knowledgebase.ollama.base_url": "Ollama 服务地址",
    "plugin.knowledgebase.ollama.llm_model": "Ollama LLM 模型",
    "plugin.knowledgebase.ollama.embed_model": "Ollama Embedding 模型",
    "plugin.knowledgebase.open_compat.base_url": "OpenCompat 服务地址",
    "plugin.knowledgebase.open_compat.api_key": "OpenCompat API Key",
    "plugin.knowledgebase.open_compat.llm_model": "OpenCompat LLM 模型",
    "plugin.knowledgebase.open_compat.embed_model": "OpenCompat Embedding 模型",
    "plugin.knowledgebase.retrieve_top_k": "召回 Top K",
    "plugin.knowledgebase.chunk_size": "Chunk 大小",
    "plugin.knowledgebase.chunk_overlap": "Chunk 重叠",
    "plugin.knowledgebase.save_environment": "保存环境配置",
    "plugin.knowledgebase.start_before_browsing":
      "请先成功启动守护进程，再展开查看集合/文档/分块。",
    "plugin.knowledgebase.storage": "存储",
    "plugin.knowledgebase.storage.sqlite": "sqlite",
    "plugin.knowledgebase.storage.chroma": "chroma",
    "plugin.knowledgebase.storage.blobs": "blobs",
    "plugin.knowledgebase.yes": "是",
    "plugin.knowledgebase.no": "否",
    "plugin.knowledgebase.refresh_storage": "刷新存储状态",
    "plugin.knowledgebase.tab.collections": "集合",
    "plugin.knowledgebase.tab.documents": "文档",
    "plugin.knowledgebase.tab.chunks": "分块",
    "plugin.knowledgebase.tab.upload": "上传",
    "plugin.knowledgebase.collections": "集合",
    "plugin.knowledgebase.reload": "重新加载",
    "plugin.knowledgebase.empty_collections": "暂无集合。",
    "plugin.knowledgebase.active_for_query": "用于查询",
    "plugin.knowledgebase.name_label": "名称",
    "plugin.knowledgebase.id_label": "ID",
    "plugin.knowledgebase.created_label": "创建时间",
    "plugin.knowledgebase.documents": "文档",
    "plugin.knowledgebase.select_collection_first": "请先选择一个集合。",
    "plugin.knowledgebase.empty_documents": "暂无文档。",
    "plugin.knowledgebase.filename_label": "文件名",
    "plugin.knowledgebase.mime_label": "MIME",
    "plugin.knowledgebase.delete_document": "删除文档",
    "plugin.knowledgebase.delete_document_confirm": "确认删除该文档？该文档下分块和向量会被一并删除。",
    "plugin.knowledgebase.delete_document_running": "删除中...",
    "plugin.knowledgebase.delete_document_failed": "删除文档失败。",
    "plugin.knowledgebase.chunks": "分块",
    "plugin.knowledgebase.select_document_first": "请先选择一个文档。",
    "plugin.knowledgebase.empty_chunks": "暂无分块。",
    "plugin.knowledgebase.text_label": "文本",
    "plugin.knowledgebase.chunk_delete_not_supported": "分块不支持单独删除，只能随文档删除级联清理。",
    "plugin.knowledgebase.delete_collection": "删除合集",
    "plugin.knowledgebase.delete_collection_confirm":
      "确认删除该合集？应用会先删除合集下所有文档，再删除合集本身。",
    "plugin.knowledgebase.delete_collection_running": "删除中...",
    "plugin.knowledgebase.delete_collection_failed": "删除合集失败。",
    "plugin.knowledgebase.upload_title": "上传文件",
    "plugin.knowledgebase.upload_collection": "目标集合",
    "plugin.knowledgebase.upload_collection_placeholder": "请选择集合",
    "plugin.knowledgebase.upload_pick_files": "选择文件",
    "plugin.knowledgebase.upload_clear_files": "清空文件",
    "plugin.knowledgebase.upload_submitting": "上传中...",
    "plugin.knowledgebase.upload_submit": "开始上传",
    "plugin.knowledgebase.upload_file": "文件",
    "plugin.knowledgebase.upload_path": "路径",
    "plugin.knowledgebase.upload_no_files": "尚未选择文件。",
    "plugin.knowledgebase.upload_results": "上传结果",
    "plugin.knowledgebase.upload_clear_results": "清空结果",
    "plugin.knowledgebase.upload_status": "状态",
    "plugin.knowledgebase.upload_job": "任务 ID",
    "plugin.knowledgebase.upload_error": "错误",
    "plugin.knowledgebase.upload_no_results": "暂无上传结果。",
    "plugin.knowledgebase.upload_empty_collections_hint": "暂无集合，请先创建默认集合后再上传。",
    "plugin.knowledgebase.create_default_collection": "创建默认集合",
    "plugin.knowledgebase.create_default_collection_success": "默认集合已创建并自动激活用于查询。",
    "plugin.knowledgebase.create_default_collection_failed": "创建默认集合失败，请重试。",
    "plugin.knowledgebase.default_collection_name": "默认集合",
    "plugin.knowledgebase.active_collections_hint":
      "当未传 collection_ids 时，kb_retrieve 仅查询已激活集合。请至少激活一个集合。",
    "plugin.knowledgebase.stale_collections_pruned": "检测到部分合集已删除，已自动同步查询范围。",
    "plugin.knowledgebase.milestones": "关键节点",
    "plugin.knowledgebase.empty_milestones": "暂无关键节点。",
    "plugin.knowledgebase.logs": "日志",
    "plugin.knowledgebase.empty_logs": "暂无日志。",
    "plugin.actionbook.unavailable": "Actionbook 插件不可用。",
    "plugin.actionbook.manual_mode_hint": "安装步骤需要手动完成，此页面仅负责检测与 bridge 管理。",
    "plugin.actionbook.enabled": "启用",
    "plugin.actionbook.check_cli": "CLI",
    "plugin.actionbook.check_skill": "Skill",
    "plugin.actionbook.check_extension": "扩展",
    "plugin.actionbook.bridge_status": "Bridge 状态",
    "plugin.actionbook.bridge_managed_running": "运行中（由应用管理）",
    "plugin.actionbook.bridge_external_running": "运行中（外部进程）",
    "plugin.actionbook.bridge_stopped": "未运行",
    "plugin.actionbook.extension_connected": "扩展连接",
    "plugin.actionbook.connected": "已连接",
    "plugin.actionbook.not_connected": "未连接",
    "plugin.actionbook.checked_at": "检测时间",
    "plugin.actionbook.refresh_checks": "刷新检测",
    "plugin.actionbook.start_bridge": "启动 Bridge",
    "plugin.actionbook.stop_bridge": "停止 Bridge",
    "plugin.actionbook.status_check": "状态检测",
    "plugin.actionbook.ping_check": "连通检测",
    "plugin.actionbook.session_token": "Session Token",
    "plugin.actionbook.copy_token": "复制 Token",
    "plugin.actionbook.copied": "已复制",
    "plugin.actionbook.token_missing": "暂无可用 Token。",
    "plugin.actionbook.token_source": "Token 来源",
    "plugin.actionbook.last_status": "最近状态",
    "plugin.actionbook.last_ping": "最近 Ping",
    "plugin.actionbook.milestones": "关键节点",
    "plugin.actionbook.empty_milestones": "暂无关键节点。",
    "plugin.actionbook.logs": "运行日志",
    "plugin.actionbook.empty_logs": "暂无日志。",

    // General
    "common.progress": "进度",
    "common.done": "完成",

    // Ralph Progress
    "ralph.progress.title": "Ralph 进度",
    "ralph.progress.iteration": "迭代次数",
    "ralph.progress.phase": "阶段",
    "ralph.progress.more": "更多",
    "ralph.progress.empty": "暂无计划或进度",
    "ralph.log.title": "检查点日志",
    "ralph.log.empty": "暂无检查点记录",
    "ralph.log.active_agent": "当前智能体",
    "ralph.log.all_agents": "全部智能体",
    "ralph.phase.init": "初始化",
    "ralph.phase.awaiting_confirm": "等待确认",
    "ralph.phase.running": "运行中",
    "ralph.phase.verifying": "检证中",
    "ralph.phase.replanning": "再拆分中",
    "ralph.phase.awaiting_continue": "等待继续确认",
    "ralph.phase.done": "已完成",
    "ralph.plan.project": "项目",
    "ralph.plan.stories": "用户故事"
  }
}

export const useAppSettings = create<AppSettingsState>()(
  persist(
    (set, get) => ({
      language: "en",
      theme: "dark",
      setLanguage: (lang) => set({ language: lang }),
      setTheme: (theme) => {
        set({ theme })
        if (theme === "dark") {
          document.documentElement.classList.add("dark")
          document.documentElement.classList.remove("light")
        } else {
          document.documentElement.classList.add("light")
          document.documentElement.classList.remove("dark")
        }
      },
      t: (key) => {
        const lang = get().language
        return translations[lang][key] || key
      }
    }),
    {
      name: "app-settings",
      onRehydrateStorage: () => (state) => {
        // Apply theme immediately on load
        if (state) {
          const theme = state.theme
          if (theme === "dark") {
            document.documentElement.classList.add("dark")
            document.documentElement.classList.remove("light")
          } else {
            document.documentElement.classList.add("light")
            document.documentElement.classList.remove("dark")
          }
        }
      }
    }
  )
)

// Deprecated export for backward compatibility during refactor
export const useLanguage = useAppSettings
